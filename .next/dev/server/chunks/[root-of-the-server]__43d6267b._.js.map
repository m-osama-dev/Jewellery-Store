{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/jewellery-store/app/lib/dbConnection.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nconst connectMongoDB = async () => {\r\n  try {\r\n    await mongoose.connect(MONGODB_URI, {\r\n      dbName: \"muhammadosama_db\",\r\n    });\r\n    console.log(\"✅ Connected to MongoDB.\");\r\n  } catch (error) {\r\n    console.error(\"❌ MongoDB connection error:\", error);\r\n  }\r\n};\r\n\r\nexport default connectMongoDB;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,MAAM,iBAAiB;IACrB,IAAI;QACF,MAAM,mKAAQ,CAAC,OAAO,CAAC,aAAa;YAClC,QAAQ;QACV;QACA,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;IAC/C;AACF;uCAEe"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///D:/jewellery-store/app/models/userModel.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst userSchema = new mongoose.Schema(\r\n  {\r\n    name: { type: String, required: true },\r\n    email: { type: String, required: true, unique: true },\r\n    password: { type: String, required: true },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.models.User || mongoose.model(\"User\", userSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,mKAAQ,CAAC,MAAM,CACpC;IACE,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;AAC3C,GACA;IAAE,YAAY;AAAK;uCAGN,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///D:/jewellery-store/app/api/login/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport connectMongoDB from \"@/app/lib/dbConnection\";\r\nimport User from \"@/app/models/userModel\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET ;  \r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const { email, password } = await req.json();\r\n\r\n    await connectMongoDB();\r\n\r\n    // check if user exists\r\n    const user = await User.findOne({ email });\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        { success: false, message: \"User not found\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    // compare password\r\n    const isMatch = await bcrypt.compare(password, user.password);\r\n    if (!isMatch) {\r\n      return NextResponse.json(\r\n        { success: false, message: \"Invalid credentials\" },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    // generate JWT\r\n    const token = jwt.sign(\r\n      { id: user._id, email: user.email },\r\n      JWT_SECRET,\r\n      { expiresIn: \"7d\" }\r\n    );\r\n\r\n    // set cookie\r\n    const response = NextResponse.json({\r\n      success: true,\r\n      message: \"Login successful\",\r\n      user: { name: user.name, email: user.email },\r\n    });\r\n\r\n    response.cookies.set(\"token\", token, {\r\n      httpOnly: true,\r\n      secure: process.env.NODE_ENV === \"production\",\r\n      sameSite: \"strict\",\r\n      path: \"/\",\r\n      maxAge: 7 * 24 * 60 * 60, // 7 days\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Login error:\", error);\r\n    return NextResponse.json(\r\n      { success: false, message: \"Server error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU;AAElC,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAE1C,MAAM,IAAA,uIAAc;QAEpB,uBAAuB;QACvB,MAAM,OAAO,MAAM,uIAAI,CAAC,OAAO,CAAC;YAAE;QAAM;QACxC,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAiB,GAC5C;gBAAE,QAAQ;YAAI;QAElB;QAEA,mBAAmB;QACnB,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;QAC5D,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAsB,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,eAAe;QACf,MAAM,QAAQ,kJAAG,CAAC,IAAI,CACpB;YAAE,IAAI,KAAK,GAAG;YAAE,OAAO,KAAK,KAAK;QAAC,GAClC,YACA;YAAE,WAAW;QAAK;QAGpB,aAAa;QACb,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YACjC,SAAS;YACT,SAAS;YACT,MAAM;gBAAE,MAAM,KAAK,IAAI;gBAAE,OAAO,KAAK,KAAK;YAAC;QAC7C;QAEA,SAAS,OAAO,CAAC,GAAG,CAAC,SAAS,OAAO;YACnC,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,MAAM;YACN,QAAQ,IAAI,KAAK,KAAK;QACxB;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAAe,GAC1C;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}